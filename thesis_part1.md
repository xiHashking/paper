# 知识图谱与检索增强生成（RAG）技术对大模型解析短篇小说的智能问答研究

**作者姓名**：习洪霖  
**专业班级**：202102070412  
**指导老师**：杨培

## 摘要

本研究以短篇小说为语料，探索将知识图谱与检索增强生成（RAG）技术应用于大语言模型（LLM）在文学文本解析中的问答任务，着力解决大模型在理解叙事性文本时面临的幻觉、上下文理解不足和结构化信息缺失等问题。研究从理论和实践两个层面构建了一种新型KG-RAG混合架构，将知识图谱提供的结构化实体关系网络与RAG技术的语义检索能力有机结合，实现了对短篇小说文本的多维度理解和精准问答。实验采用多指标评估体系，对比了传统LLM、纯知识图谱（KG）、纯检索增强生成（RAG）和KG-RAG四种方法在不同类型问题上的表现。结果表明，KG-RAG混合方法在内容完整性、实体覆盖率、定义准确性和知识库一致性四个维度上均优于单一方法，特别是在处理关系型和推理性问题时，优势尤为显著，语义覆盖度显著增强。本研究不仅丰富了大模型增强的技术路径，也为智能问答系统在文学解析场景中的实际应用提供了理论基础和实践方法，同时对数字人文研究和智能文学教育领域具有积极的推动作用。

**关键词**：知识图谱；检索增强生成；大语言模型；短篇小说；智能问答

## Abstract

This study uses short stories as corpus to explore the application of knowledge graph and retrieval-augmented generation (RAG) technology to question-answering tasks of large language models (LLMs) in literary text parsing. The research addresses challenges such as hallucinations, insufficient contextual understanding, and lack of structured information that LLMs face when comprehending narrative texts. From both theoretical and practical perspectives, this study constructs a novel KG-RAG hybrid architecture that organically combines the structured entity-relationship network provided by knowledge graphs with the semantic retrieval capabilities of RAG technology, achieving multi-dimensional understanding and precise question answering for short story texts. The experiments employ a multi-metric evaluation system to compare four methods: traditional LLM, pure knowledge graph (KG), pure retrieval-augmented generation (RAG), and KG-RAG on different types of questions. Results show that the KG-RAG hybrid method outperforms single methods in four dimensions: content completeness, entity coverage, definition accuracy, and knowledge base consistency. The advantage is particularly significant when handling relational and inferential questions, with BLEU scores improved by 15-25% on average and significantly enhanced semantic coverage. This research not only enriches the technical path for large model enhancement but also provides theoretical foundations and practical methods for the actual application of intelligent question-answering systems in literary analysis scenarios, while positively promoting digital humanities research and intelligent literary education.

**Keywords**: knowledge graph; retrieval-augmented generation; large language model; short story; intelligent question answering

# 第一章 绪论

## 1.1 研究背景与意义

### 1.1.1 研究背景

随着人工智能技术的快速发展，大语言模型（Large Language Models, LLMs）在自然语言处理领域取得了革命性突破。以GPT（Generative Pre-trained Transformer）系列、Claude和LLaMA等为代表的大语言模型，通过大规模预训练和自监督学习，展现出了前所未有的语言理解与生成能力。这些模型能够完成包括文本摘要、问答对话、内容创作等多样化任务，在学术研究和商业应用中显示出巨大潜力。

然而，当大语言模型面对叙事性较强的文学作品，尤其是短篇小说这类具有复杂情节结构、丰富修辞手法和深层意蕴的文本时，其表现往往不尽如人意。根据最新研究数据，在文学理解类任务中，主流大语言模型的准确率普遍低于通用问答任务10-15个百分点（Zhang et al., 2023）。这一现象引发了研究界对如何增强大语言模型在特定领域文本理解能力的广泛探索。

短篇小说作为一种重要的文学体裁，具有情节紧凑、人物关系复杂、意蕴丰富等特点，对自然语言处理系统提出了独特挑战。读者理解短篇小说不仅需要把握文本表层信息，还需要理解人物关系网络、情节发展脉络，甚至需要捕捉作者通过隐喻、象征等手法传达的深层意义。这种多层次的理解要求，使得短篇小说成为测试人工智能语言理解能力的理想素材。

知识图谱（Knowledge Graph, KG）技术能够将非结构化文本转化为结构化的实体关系网络，为文本理解提供骨架式支撑。检索增强生成（Retrieval-Augmented Generation, RAG）技术则通过在生成回答前检索相关信息，增强模型对特定领域知识的把握。这两种技术各有优势，但在文学文本理解领域的协同应用研究仍处于起步阶段。

### 1.1.2 研究意义

本研究提出将知识图谱与检索增强生成技术相结合的混合方法，以提升大语言模型在短篇小说解析中的问答能力，具有以下多方面的重要意义：

**1. 理论意义**

- **跨领域技术融合探索**：本研究探索知识图谱与RAG技术协同作用的机制，开创了结构化知识表示与检索增强生成在文学文本理解中的新范式，丰富了自然语言处理的理论体系。

- **大语言模型增强理论创新**：通过设计KG-RAG混合架构，提出了一种新的大模型能力增强路径，为解决大语言模型在复杂文本理解中的固有局限提供了理论支持。

- **文学计算理论贡献**：研究建立了从文学文本到结构化知识再到智能问答的完整理论框架，促进了数字人文与人工智能的深度融合，为文学计算研究提供了新视角。

**2. 实践意义**

- **提升智能问答系统质量**：开发的KG-RAG混合方法能够构建更精准、可靠的文学文本智能问答系统，解决大模型在文学解析中的幻觉问题和事实不一致问题。

- **数字人文研究工具升级**：为文学研究者提供高效的文本分析工具，帮助发现文本中的隐含模式和关系网络，促进数字人文学科的方法创新。

- **文学教育技术支持**：为文学教育提供智能辅助工具，帮助学生更深入理解文学作品的结构和内涵，提高文学教育的效率和质量。

**3. 应用前景**

- **多领域拓展潜力**：开发的混合方法可推广至其他复杂文本理解场景，如法律文书、医学文献、专业论文等解析任务，具有广泛的应用潜力。

- **智能内容创作辅助**：为创作者提供情节分析和角色关系梳理工具，辅助文学创作和剧本编写过程。

- **个性化阅读体验增强**：为读者提供个性化的阅读助手，解答阅读过程中的疑问，增强阅读体验和理解深度。

随着人工智能技术的普及应用，提升机器对复杂文本的理解能力已成为当前研究热点。本研究通过创新性地结合知识图谱与RAG技术，不仅能够改善智能问答系统的性能，也为数字人文研究和智能教育提供了新的可能性，具有重要的学术价值和应用价值。

## 1.2 研究内容与方法

### 1.2.1 研究内容

本研究主要探索知识图谱与检索增强生成技术在大语言模型解析短篇小说智能问答中的应用，核心研究内容包括：

**1. 短篇小说知识图谱构建方法研究**

- 设计并实现基于spaCy的知识图谱提取系统，从短篇小说中自动抽取实体及其关系
- 开发基于关键词的启发式算法，补充语言学方法难以捕捉的隐含关系
- 研究知识图谱可视化方法，直观展示小说中的实体关系网络
- 探讨大规模文本的分块处理策略，解决长文本知识图谱构建的效率问题

**2. 短篇小说RAG检索系统实现研究**

- 设计适合叙事文本的分块策略，平衡语义完整性和检索精度
- 实现基于OpenAI嵌入模型和FAISS向量数据库的高效检索系统
- 研究检索结果排序优化方法，提高检索内容的相关性
- 探索批处理和增量更新机制，提高系统处理效率

**3. KG-RAG混合问答框架设计研究**

- 提出知识图谱与RAG技术的融合方法，设计混合问答架构
- 研究结构化知识与语义检索结果的融合策略，优化提示工程
- 探索不同类型问题的最优回答生成方法
- 设计混合系统的工作流程和组件交互机制

**4. 多维度评估体系构建研究**

- 建立适合文学文本问答的多维度评估指标体系
- 设计自动化评估工具，提高实验效率
- 研究不同类型问题的评估策略
- 开展对比实验，评估不同方法在各指标上的表现差异

本研究同时关注技术实现和性能评估两个方面，通过系统构建和实验验证相结合的方式，全面探索知识图谱与RAG技术在文学文本智能问答中的应用价值。

### 1.2.2 研究方法

本研究采用多种研究方法相结合的策略，确保研究的全面性和可靠性：

**1. 文献研究法**

- 系统梳理知识图谱、RAG技术和大语言模型相关文献
- 分析文学文本智能问答的研究现状和挑战
- 总结已有方法的优缺点，为本研究提供理论基础

**2. 系统开发法**

- 基于Python和相关NLP库实现知识图谱构建系统
- 利用OpenAI API和FAISS向量库开发RAG检索系统
- 设计并实现KG-RAG混合问答框架
- 构建评估工具和可视化界面

**3. 实验对比分析法**

- 设计对照实验，比较传统LLM、纯KG方法、纯RAG方法和KG-RAG混合方法
- 通过自定义的评估指标体系，对比不同方法的优劣
- 分析不同类型问题对方法选择的影响
- 统计分析实验结果，得出客观结论

**4. 案例分析法**

- 选取典型案例进行深入分析，展示各方法的优缺点
- 分析失败案例，找出方法改进的方向
- 通过案例分析验证理论假设
- 总结经验教训，指导系统优化

研究过程中，采用定量与定性分析相结合的方式，从内容完整性、实体覆盖率、定义准确性和知识库一致性四个维度，综合评估不同方法的效果。通过科学的实验设计和严谨的数据分析，确保研究结论的可靠性和有效性。

## 1.3 研究难点与创新点

### 1.3.1 研究难点

本研究在探索知识图谱与RAG技术应用于短篇小说智能问答过程中，面临以下几个主要难点：

**1. 文学文本知识抽取难点**

- **隐含信息识别**：短篇小说中的许多关键信息通过隐喻、象征等手法间接表达，难以被现有NLP工具直接识别和提取。
- **非显式关系抽取**：人物间的情感、态度等关系往往通过对话和行为描写隐晦表达，增加了关系抽取的难度。
- **上下文依赖解析**：小说中的代词指代和省略现象频繁，正确解析需要考虑长距离上下文依赖。
- **修辞手法处理**：文学作品中的修辞手法（如比喻、夸张、讽刺）给文本含义解析带来挑战。

**2. 知识图谱构建技术难点**

- **实体边界识别**：准确识别小说中人物、地点、事件等实体的边界，特别是处理复合名词和别称。
- **关系类型多样性**：文学作品中实体间关系类型丰富且复杂，难以用有限的关系类型覆盖全部。
- **图谱质量评估**：缺乏针对文学文本知识图谱的标准评估方法，难以客观衡量图谱质量。
- **长文本处理效率**：小说文本量大，构建完整知识图谱计算开销较大，需要平衡效率和质量。

**3. RAG系统实现难点**

- **语义相关性判断**：在叙事性文本中，相关内容可能分散在不同段落，增加了相关性判断的难度。
- **检索粒度选择**：选择合适的文本分块粒度，平衡语义完整性和检索精度。
- **检索噪声控制**：减少语义相似但实际不相关的文本片段被检索的情况。
- **资源消耗优化**：向量化和索引构建过程资源消耗较大，需要优化处理流程。

**4. 混合架构设计难点**

- **异构信息融合**：如何有效融合结构化的知识图谱信息与非结构化的RAG检索结果。
- **冲突信息协调**：当知识图谱和RAG检索结果存在冲突时，如何决策使用哪部分信息。
- **提示工程优化**：设计合适的提示模板，引导大语言模型充分利用两种信息源。
- **复杂问题分解**：将复杂问题分解为子问题，分别利用知识图谱和RAG系统解答。

**5. 评估体系构建难点**

- **评估标准定义**：缺乏统一的文学文本问答评估标准，需要自行定义合理的评估指标。
- **主观性控制**：文学理解具有一定主观性，如何设计客观的评估方法是一大挑战。
- **多维度权衡**：如何权衡回答的准确性、完整性、相关性和深度等多个维度。
- **自动化评估实现**：实现自动化评估工具，减少人工评估的主观偏差。

### 1.3.2 研究创新点

针对上述研究难点，本研究提出了一系列创新性解决方案，主要创新点包括：

**1. 技术融合创新**

- **KG-RAG混合架构**：首次提出将知识图谱与RAG技术应用于短篇小说解析的混合架构，创新性地结合结构化知识与语义检索能力。
- **互补增强机制**：设计知识图谱和RAG系统的互补增强机制，知识图谱提供骨架式结构，RAG提供丰富的语义细节。
- **分层协同推理**：提出分层协同推理方法，先利用知识图谱把握整体结构，再利用RAG获取具体细节，最后综合生成答案。
- **双向信息流设计**：创新性地设计了从知识图谱到RAG和从RAG到知识图谱的双向信息流，增强系统推理能力。

**2. 方法实现创新**

- **混合知识图谱构建方法**：结合语言学方法和启发式方法的混合知识图谱构建技术，提高实体关系抽取的覆盖率和准确率。
- **情感关系增强算法**：专门设计针对文学文本的情感关系增强算法，捕捉人物间的情感态度变化。
- **叙事结构感知分块策略**：开发考虑叙事结构的文本分块策略，保持检索片段的语义完整性。
- **上下文感知提示模板**：设计适应不同问题类型的上下文感知提示模板，优化混合信息的呈现方式。

**3. 评估体系创新**

- **文学文本问答多维度评估框架**：建立针对文学文本问答的多维度评估指标体系，包括内容完整性、实体覆盖率、定义准确性和知识库一致性。
- **问题类型自适应评估**：针对不同类型的问题（事实性、关系型、推理性），设计差异化的评估方法。
- **半自动化评估工具**：开发结合自动评估和人工校验的半自动化评估工具，平衡效率和准确性。
- **对比实验设计创新**：设计系统化的对比实验方案，全面评估不同方法在各指标上的表现差异。

**4. 应用场景创新**

- **领域适应性方法**：提出针对短篇小说文本特点的领域适应性方法，优化系统在文学领域的表现。
- **数字人文新工具**：将先进NLP技术应用于文学解析，为数字人文研究提供新工具和新方法。
- **教育应用新模式**：探索智能问答系统在文学教育中的应用模式，提供个性化学习支持。
- **交互式文学分析**：设计交互式文学分析界面，支持读者和研究者深入探索文本含义。

通过这些创新点，本研究不仅解决了当前大语言模型在文学文本理解中面临的技术挑战，也为数字人文研究和智能教育领域提供了新的技术路径和应用方向。

## 1.4 论文结构

本论文共分为六章，结构安排如下：

**第一章 绪论**

介绍研究背景与意义，阐述研究内容与方法，分析研究难点与创新点，概述论文结构，为全文奠定基础。

**第二章 理论基础与相关技术**

系统梳理大语言模型、知识图谱技术、检索增强生成技术的基本原理和研究现状，介绍KG-RAG混合架构的理论基础，分析文学文本智能问答的特殊挑战。

**第三章 系统设计与实现**

详细阐述系统整体架构，介绍知识图谱构建、RAG系统实现和KG-RAG混合问答三个核心模块的设计与实现，说明关键算法和技术细节。

**第四章 实验设计与评估**

介绍实验数据集构建，阐述评估指标体系，详细分析四种方法（传统LLM、纯KG、纯RAG、KG-RAG）的实验结果，通过典型案例深入剖析各方法的优缺点。

**第五章 结论与展望**

总结研究成果和主要贡献，分析研究局限性，提出未来工作方向，展望应用前景。

**第六章 参考文献**

列出本研究参考的国内外相关文献资料。

**附录**

包含代码示例、详细实验数据、系统使用说明等补充材料。

本论文结构清晰，逻辑严密，各章节之间有机衔接，既注重理论分析，又重视实践验证，全面展示了知识图谱与RAG技术在短篇小说智能问答中的应用研究成果。 